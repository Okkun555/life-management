# プロフィール機能のDesign Doc

## 背景と目的

### やること
- プロフィールを設定可能にする
- プロフィールの公開・非公開を切り替えられる
- 他者のアカウントをフォローできる

### やらないこと
- プロフィールの削除機能

## 機能仕様

### プロフィール登録機能
- プロフィールには複数の画像を添付できる（プロフィール画像としてアップロードできるのは1枚）
  - 画像添付にはRails標準のActive Storageを利用する（本番ではGCSを利用する想定）

### プロフィール設定機能

## システムデザイン・アーキテクチャ

### データベース

#### usersテーブル
- アプリケーション内でのアカウントを表すテーブル

| 論理名         | 物理名       | データ型     | デフォルト値      | Null 許可 | キー | 備考 |
| -------------- | ------------ | ------------ | ----------------- | --------- | ---- | ---- |
| id             | id           | bigint       |                   |           | PK   |      |
| アカウント名   | name         | varchar(50)  |                   |           |      |      |
| メールアドレス | email        | varchar(254) |                   |           |      |      |
| 外部認証ID     | supabase_uid | varchar      |                   |           |      |      |
| 作成日時       | created_at   | datetime     | CURRENT_TIMESTAMP |           |      |      |
| 更新日時       | updated_at   | datetime     |                   | ⚪︎      |      |      |

#### profilesテーブル
- アカウントに紐づくプロフィールを表現するテーブル

| 論理名       | 物理名   | データ型 | デフォルト値 | Null 許可 | キー | 備考                         |
| ------------ | -------- | -------- | ------------ | --------- | ---- | ---------------------------- |
| id           | id       | bigint   |              |           | PK   |                              |
| ユーザーid   | user_id  | bigint   |              |           | FK   |                              |
| 生年月日     | birthday | datetime |              |           |      |                              |
| 生物学的性別 | sex      | int      |              |           |      | 1:man, 2:woman, 3:secret |
| 作成日時       | created_at   | datetime     | CURRENT_TIMESTAMP |           |      |      |
| 更新日時       | updated_at   | datetime     |                   | ⚪︎      |      |      |
